---
- name: Load install repo
  ansible.builtin.include_tasks:
    file: repo.{{ factum_os_like }}-like.yaml
  when: factum_os_like in ["ubuntu"]

- name: Install
  ansible.builtin.package:
    name: "{{ pkg_map[factum_os_like] | default(pkg_map['_default']) }}"
    state: "{{ (golang_repo_state.changed | default(false)) | ternary('latest', 'present') }}"
  vars:
    pkg_map:
      _default: go
      ubuntu: golang-go
  become: true

- name: Mark dones
  ansible.builtin.set_fact:
    golang_done: true
