---
# Versions:
# * https://hub.docker.com/r/adguard/adguardhome/tags
# * https://hub.docker.com/r/tailscale/tailscale/tags
# -----
adguard_managed: false
adguard_enabled: false
adguard_version:        # Leave blank to leverage bookshelf configuration
adguard_compose_dir:    # Unless you know ..., leave blank to leverage bookshelf configuration
adguard_owner: "{{ ansible_user_id }}"
adguard_conf_dir: ~/conf/adguard
adguard_service_name: adguard
adguard_hostname: "{{ adguard_service_name }}"
adguard_vhost: "{{ adguard_service_name }}.domain.local"
adguard_web_ui_port:    # Leave blank to leverage bookshelf configuration
adguard_init_ui_port:   # Leave blank to leverage bookshelf configuration
adguard_tz: "{{ ansible_date_time.tz | default('UTC') }}"
# Optional path to extra configuration .env.j2 file, will affect both adguard
# and tailscale. Ex.: "{{ playbook_dir }}/resources/adguard/extra.env.j2"
adguard_extra_envfile:
# ----------
# The following settings configure Adguard to run as a part of tailnet. This
# allows to configure adguard for a tailnet DNS server under
# https://tailscale.com/admin/dns -> Nameservers
#
# NOTE 1: Local network is not accessible within tailnet, which means that if i
# create an adguard DNS rewrite for 'my-site.local' to '192.168.0.20', the site
# will not be reachable in the tailnet. SOLUTION: deploy another tailscale
# service with "advertised routes" (https://tailscale.com/kb/1019/subnets)
#
# IMPORTANT 1: Auth key is required for initial container run:
# https://tailscale.com/admin/settings/keys -> 'Generate auth key...'
#   -> generate single time or reusable
#
# IMPORTANT 2: After deployment https://tailscale.com/admin/machines -> 3 dots
# next to the machine -> Disable key expiry (to avoid re-login to tailscale)
adguard_tailscaled: false
adguard_tailscale_version:    # Leave blank to leverage bookshelf configuration
adguard_tailscale_service_name: "{{ adguard_service_name }}-tailscale"
adguard_tailscale_auth_key:
