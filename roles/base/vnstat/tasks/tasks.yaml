---
- name: Epel-release
  ansible.builtin.import_role: { name: epel-release }

- name: Privileged
  become: true
  block:
    - name: Install
      ansible.builtin.package: { name: vnstat }

    - name: Enable service
      ansible.builtin.service:
        name: "{{ service_name_map[factum_os_family] | default(service_name_map['_default']) }}"
        state: started
        enabled: true
      vars:
        service_name_map:
          _default: vnstat
          alpine: vnstatd
